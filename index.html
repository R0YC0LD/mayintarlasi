<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geli≈ümi≈ü Sanal Bebek - Web Pou</title>
    <style>
        /* --- GENEL AYARLAR --- */
        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background-color: #f0f8ff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            transition: background-color 1s;
        }

        body.night-mode {
            background-color: #2c3e50;
        }

        /* --- OYUN ALANI --- */
        #game-container {
            position: relative;
            width: 350px;
            height: 550px;
            background: #fffbe6;
            border: 5px solid #ffcc00;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            overflow: hidden;
            text-align: center;
            transition: background 1s;
        }

        body.night-mode #game-container {
            background: #34495e;
            border-color: #7f8c8d;
        }

        /* --- √úST BAR (ƒ∞STATƒ∞STƒ∞KLER) --- */
        #stats-bar {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            background: rgba(255, 204, 0, 0.9);
            padding: 8px;
            color: #5a4a42;
            font-size: 13px;
            font-weight: bold;
        }

        .stat-item { margin: 2px 5px; }

        /* --- ALTIN G√ñSTERGESƒ∞ --- */
        #coin-display {
            position: absolute;
            top: 50px;
            left: 10px;
            background: #ffd700;
            padding: 5px 10px;
            border-radius: 15px;
            border: 2px solid #daa520;
            font-weight: bold;
            color: #b8860b;
            z-index: 10;
        }

        /* --- KARAKTER (POU) --- */
        #pet {
            width: 80px;
            height: 70px;
            background-color: #d2691e;
            border-radius: 50% 50% 40% 40%;
            position: absolute;
            bottom: 110px;
            left: 50%;
            transform: translateX(-50%);
            transition: all 0.3s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 3px solid rgba(0,0,0,0.2);
            z-index: 2;
        }

        /* G√∂zler */
        .eyes { display: flex; gap: 10px; margin-bottom: 5px; position: relative; z-index: 3;}
        .eye {
            width: 20px; height: 20px;
            background: white; border-radius: 50%;
            border: 2px solid black; position: relative;
            overflow: hidden;
        }
        .pupil {
            width: 8px; height: 8px;
            background: black; border-radius: 50%;
            position: absolute; top: 5px; left: 5px;
            transition: all 0.5s;
        }

        /* Uyuyan G√∂zler */
        .sleeping-eye {
            height: 2px; width: 20px; background: black; border: none; margin-top: 10px;
        }

        /* ≈ûapka (Marketten alƒ±nan) */
        #hat {
            display: none; /* Ba≈ülangƒ±√ßta gizli */
            position: absolute;
            top: -25px;
            font-size: 30px;
            z-index: 4;
        }

        /* Kaka */
        .poop {
            font-size: 30px;
            position: absolute;
            bottom: 80px;
            animation: bounce 1s infinite;
            cursor: pointer;
            z-index: 1;
        }

        /* --- KONTROLLER --- */
        #controls {
            position: absolute;
            bottom: 15px;
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        button {
            padding: 8px 12px;
            font-size: 14px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            color: white;
            box-shadow: 0 4px 0 rgba(0,0,0,0.2);
        }
        button:active { transform: translateY(4px); box-shadow: none; }

        #btn-feed { background-color: #ff6b6b; }
        #btn-wash { background-color: #4ecdc4; }
        #btn-sleep { background-color: #4b6584; }
        #btn-shop { background-color: #f1c40f; color: #333; }
        #btn-reset { background-color: #95a5a6; font-size: 10px; position: absolute; top: 5px; right: 5px; padding: 3px;}

        /* --- MARKET MODALI --- */
        #shop-modal {
            display: none;
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            background: white;
            border: 4px solid #f1c40f;
            border-radius: 10px;
            padding: 20px;
            z-index: 100;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
        }
        .shop-item {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 10px; border-bottom: 1px solid #eee; padding-bottom: 5px;
        }
        .buy-btn { background: #2ecc71; font-size: 12px; padding: 5px 10px;}
        .close-shop { background: #e74c3c; width: 100%; margin-top: 10px;}

        /* Efektler */
        .dirty { filter: brightness(0.7) sepia(0.6); }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
        @keyframes eat { 0% { transform: translateX(-50%) scale(1); } 50% { transform: translateX(-50%) scale(1.1); } 100% { transform: translateX(-50%) scale(1); } }
    </style>
</head>
<body>

    <div id="game-container">
        <button id="btn-reset" onclick="resetGame()">RESET</button>

        <div id="coin-display">üí∞ <span id="coin-val">0</span></div>

        <div id="stats-bar">
            <span class="stat-item">üçî A√ßlƒ±k: <span id="hunger-val">100</span>%</span>
            <span class="stat-item">üßº Hijyen: <span id="clean-val">100</span>%</span>
            <span class="stat-item">‚ö° Enerji: <span id="energy-val">100</span>%</span>
        </div>
        
        <div style="margin-top:5px; font-size:12px; color:#666; background:rgba(255,255,255,0.5); display:inline-block; padding:2px 10px; border-radius:10px;">
            Seviye: <span id="level-val">Bebek</span> (B√ºy√ºme: <span id="growth-val">0</span>)
        </div>

        <div id="pet">
            <div id="hat">üé©</div>
            <div class="eyes" id="eyes">
                <div class="eye"><div class="pupil"></div></div>
                <div class="eye"><div class="pupil"></div></div>
            </div>
        </div>

        <div id="shop-modal">
            <h3>üõí Market</h3>
            <div class="shop-item">
                <span>üîµ Mavi Renk</span>
                <button class="buy-btn" onclick="buyItem('blue', 50)">50 üí∞</button>
            </div>
            <div class="shop-item">
                <span>üü¢ Ye≈üil Renk</span>
                <button class="buy-btn" onclick="buyItem('green', 50)">50 üí∞</button>
            </div>
            <div class="shop-item">
                <span>üé© ≈ûapka</span>
                <button class="buy-btn" onclick="buyItem('hat', 100)">100 üí∞</button>
            </div>
            <button class="close-shop" onclick="toggleShop()">Kapat</button>
        </div>

        <div id="controls">
            <button id="btn-feed" onclick="feedPet()">üçï Besle</button>
            <button id="btn-wash" onclick="washPet()">üöø Yƒ±ka</button>
            <button id="btn-sleep" onclick="toggleSleep()">üí° I≈üƒ±k</button>
            <button id="btn-shop" onclick="toggleShop()">üõí Market</button>
        </div>
    </div>

    <script>
        // --- DEƒûƒ∞≈ûKENLER VE AYARLAR ---
        // LocalStorage'dan veri var mƒ± kontrol et, yoksa varsayƒ±lanlarƒ± kullan
        let gameState = JSON.parse(localStorage.getItem('pouSaveData')) || {
            hunger: 100,
            cleanliness: 100,
            energy: 100,
            growth: 0,
            coins: 0,
            skinColor: '#d2691e',
            hasHat: false,
            level: 'Bebek',
            poopCount: 0
        };

        let isSleeping = false;
        
        // DOM Elementleri
        const pet = document.getElementById('pet');
        const gameContainer = document.getElementById('game-container');
        const eyesContainer = document.getElementById('eyes');
        const hatEl = document.getElementById('hat');
        const body = document.body;

        // --- ANA OYUN D√ñNG√úS√ú (HER SANƒ∞YE √áALI≈ûIR) ---
        setInterval(() => {
            gameLoop();
            saveGame(); // Her saniye otomatik kaydet
        }, 1000);

        function gameLoop() {
            if (isSleeping) {
                // Uyurken enerji artar, a√ßlƒ±k yava≈ü d√º≈üer
                if (gameState.energy < 100) gameState.energy += 5;
                if (gameState.hunger > 0) gameState.hunger -= 1;
            } else {
                // Uyanƒ±kken normal d√º≈ü√º≈ü
                if (gameState.hunger > 0) gameState.hunger -= 2;
                if (gameState.energy > 0) gameState.energy -= 1;
                
                // Yerde kaka varsa hijyen hƒ±zlƒ± d√º≈üer
                let dropRate = gameState.poopCount > 0 ? 3 : 1;
                if (gameState.cleanliness > 0) gameState.cleanliness -= dropRate;
            }

            // Sƒ±nƒ±rlandƒ±rmalar (0-100 arasƒ±)
            gameState.hunger = Math.max(0, Math.min(100, gameState.hunger));
            gameState.energy = Math.max(0, Math.min(100, gameState.energy));
            gameState.cleanliness = Math.max(0, Math.min(100, gameState.gameState)); // Fix below in updateUI
            
            updateUI();
        }

        // --- G√ñRSEL G√úNCELLEME ---
        function updateUI() {
            document.getElementById('hunger-val').innerText = gameState.hunger;
            document.getElementById('clean-val').innerText = gameState.cleanliness;
            document.getElementById('energy-val').innerText = gameState.energy;
            document.getElementById('growth-val').innerText = gameState.growth;
            document.getElementById('level-val').innerText = gameState.level;
            document.getElementById('coin-val').innerText = gameState.coins;

            // Renk ve ≈ûapka
            pet.style.backgroundColor = gameState.skinColor;
            hatEl.style.display = gameState.hasHat ? 'block' : 'none';

            // Kirlilik Efekti
            if (gameState.cleanliness < 50) pet.classList.add('dirty');
            else pet.classList.remove('dirty');

            // B√ºy√ºkl√ºk Ayarƒ±
            let size = 80 + (gameState.growth * 0.5);
            pet.style.width = size + "px";
            pet.style.height = (size - 10) + "px";

            // Uyku G√∂zleri
            if (isSleeping) {
                eyesContainer.innerHTML = '<div class="sleeping-eye"></div><div class="sleeping-eye"></div>';
            } else if (gameState.energy < 20) {
                 // Yorgun g√∂zler (yarƒ± kapalƒ± yapƒ±labilir ama ≈üimdilik normal)
                 resetEyes();
            } else {
                resetEyes();
            }
        }

        function resetEyes() {
            if (eyesContainer.innerHTML.includes('sleeping-eye')) {
                eyesContainer.innerHTML = '<div class="eye"><div class="pupil"></div></div><div class="eye"><div class="pupil"></div></div>';
            }
        }

        // --- AKSƒ∞YONLAR ---

        function feedPet() {
            if (isSleeping) { alert("Uyurken yemek yiyemez!"); return; }
            if (gameState.hunger >= 100) { alert("Karnƒ± tok!"); return; }

            gameState.hunger = Math.min(gameState.hunger + 20, 100);
            gameState.growth += 5;
            checkLevel();
            
            // Animasyon
            pet.style.animation = "eat 0.3s ease";
            setTimeout(() => { pet.style.animation = ""; }, 300);

            // Kaka yapma ihtimali ba≈ülat
            setTimeout(makePoop, 2000);
            updateUI();
        }

        function makePoop() {
            if (isSleeping) return; // Uyurken kaka yapmaz
            
            const poop = document.createElement('div');
            poop.classList.add('poop');
            poop.innerText = "üí©";
            const randomX = Math.floor(Math.random() * 200) + 50; 
            poop.style.left = randomX + "px";
            
            // Tƒ±klayƒ±nca temizleme olayƒ± ekle
            poop.onclick = function() {
                this.remove();
                gameState.poopCount--;
                gameState.coins += 5; // Kaka temizleyince para kazanƒ±lƒ±r
                alert("Kaka temizlendi! +5 Altƒ±n");
                updateUI();
            };

            gameContainer.appendChild(poop);
            gameState.poopCount++;
            gameState.cleanliness = Math.max(0, gameState.cleanliness - 10);
            updateUI();
        }

        function washPet() {
            if (isSleeping) return;
            // Sadece yƒ±kar, kakalarƒ± elle toplamak gerekir (Oyunla≈ütƒ±rma i√ßin)
            if(gameState.cleanliness >= 100) { alert("Zaten tertemiz!"); return; }
            
            gameState.cleanliness = 100;
            gameState.coins += 2; // Yƒ±kanƒ±nca az para
            updateUI();
        }

        function toggleSleep() {
            isSleeping = !isSleeping;
            if (isSleeping) {
                body.classList.add('night-mode');
                document.getElementById('btn-sleep').innerText = "‚òÄÔ∏è Uyan";
            } else {
                body.classList.remove('night-mode');
                document.getElementById('btn-sleep').innerText = "üí° I≈üƒ±k";
            }
            updateUI();
        }

        function checkLevel() {
            if (gameState.growth >= 100 && gameState.level === "Bebek") {
                gameState.level = "Yeti≈ükin";
                alert("TEBRƒ∞KLER! Pou b√ºy√ºd√º!");
                pet.style.borderRadius = "40% 40% 30% 30%";
            }
        }

        // --- MARKET Sƒ∞STEMƒ∞ ---
        function toggleShop() {
            const modal = document.getElementById('shop-modal');
            modal.style.display = modal.style.display === 'block' ? 'none' : 'block';
        }

        function buyItem(item, price) {
            if (gameState.coins < price) {
                alert("Yeterli paran yok! Kaka temizleyerek para kazan.");
                return;
            }

            gameState.coins -= price;

            if (item === 'blue') gameState.skinColor = '#3498db';
            if (item === 'green') gameState.skinColor = '#2ecc71';
            if (item === 'hat') gameState.hasHat = true;

            updateUI();
            alert("Satƒ±n alma ba≈üarƒ±lƒ±!");
        }

        // --- KAYIT Sƒ∞STEMƒ∞ (LocalStorage) ---
        function saveGame() {
            localStorage.setItem('pouSaveData', JSON.stringify(gameState));
        }

        function resetGame() {
            if(confirm("Oyunu sƒ±fƒ±rlamak istiyor musun?")) {
                localStorage.removeItem('pouSaveData');
                location.reload();
            }
        }

        // Ba≈ülangƒ±√ßta kakalarƒ± (kaydedilmediƒüi i√ßin g√∂rsel olarak) temizle ama count kalsƒ±n
        // Basitlik i√ßin sayfa yenilenince yerdeki kakalar gider ama count sƒ±fƒ±rlanƒ±r
        gameState.poopCount = 0; 
        updateUI();

    </script>
</body>
</html>
